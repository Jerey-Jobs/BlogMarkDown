---
title: 阿里巴巴Java编程规约学习记录
subtitle: "让Java开发者能够提升协作效率、提高代码质量"
header-img: "img/post-bg-alibaba.jpg"
tags: Java
grammar_cjkRuby: true
catalog: true
layout:  post
---

### 浅谈

2017年2月9日，阿里发布了Java编程规范，旨在为行业树立新的规范，经过阅读，感觉为行业进步的确能够带来不少的好处。

以下是阿里公共号原文：

众所周知，制订交通法规表面上是要限制行车权，实际上是保障公众的人身安全。试想如果没有限速，没有红绿灯，没有规定靠右行驶，谁还敢上路。同理，对软件来说，适当的规范和标准绝不是消灭代码内容的创造性、优雅性，而是限制过度个性化，以一种普遍认可的方式一起做事。阿里巴巴集团推出的Java开发手册是阿里巴巴近千名开发同学集体智慧的结晶，以开发视角为中心，详细列举如何开发更加高效，更加容错，更加有协作性，力求知其然，更知其不然，结合正反例，让Java开发者能够提升协作效率、提高代码质量。

阿里，的确为整个行业操碎了心，下面，我们就来看一看手册上的重点内容。

### 命名

命名的不就讲了，大体就是正常的方式，不要奇葩命名

### 常量定义，还是有点要说的

- 不允许出现任何魔法值（即未经定义的常量）直接出现在代码中。 (这个大家都知道)


- long 或者 Long 初始赋值时，必须使用大写的 L，不能是小写的 l，小写容易跟数字 1 混淆，造成误解


- 如果变量值仅在一个范围内变化用 Enum 类。如果还带有名称之外的延伸属性，必须 使用 Enum 类，下面正例中的数字就是延伸信息，表示星期几。(这个，在C语言的时候的确是注意的，转到java后我还真的没注意这一点)


### 格式规定

- 格式规定其实没有太多要讲了，美观，大方，清爽，且符合Google的Format基本就行了

### OOP规约

- 【强制】避免通过一个类的对象引用访问此类的静态变量或静态方法，无谓增加编译器解析成 本，直接用类名来访问即可。 说得好。


- 【强制】相同参数类型，相同业务含义，才可以使用 Java 的可变参数，避免使用 Object


- 对外暴露的接口签名，原则上不允许修改方法签名，避免对接口调用方产生影响。接口过时必须加 @Deprecated 注解，并清晰地说明采用的新接口或者新服务是什么。


- 【强制】Object 的 equals 方法容易抛空指针异常，应使用常量或确定有值的对象来调用 equals。    
	- 正例： "test".equals(object); 
	- 反例： object.equals("test"); 
	- 说明：推荐使用 java.util.Objects#equals （JDK7 引入的工具类） 


- 【强制】所有的相同类型的包装类对象之间值的比较，全部使用 equals 方法比较。 
	- 说明：对于 Integer var=?在-128 至 127 之间的赋值，Integer 对象是在 IntegerCache.cache 产生，会复用已有对象，这个区间内的 Integer 值可以直接使用==进行 判断，但是这个区间之外的所有数据，都会在堆上产生，并不会复用已有对象，这是一个大坑， 推荐使用 equals 方法进行判断。


- 【强制】构造方法里面禁止加入任何业务逻辑，如果有初始化逻辑，请放在 init 方法中。 干得漂亮。


- 【强制】POJO 类必须写 toString 方法。使用 IDE 的中工具：source> generate toString 时，如果继承了另一个 POJO 类，注意在前面加一下 super.toString。 


- 【推荐】使用索引访问用 String 的 split 方法得到的数组时，需做最后一个分隔符后有无 内容的检查，否则会有抛 IndexOutOfBoundsException 的风险。 
	- 说明： 
	
``` java
 String str = "a,b,c,,";  
 String[] ary = str.split(",");  //预期大于 3，结果是
 System.out.println(ary.length);
```


- 循环体内，字符串的联接方式，使用 StringBuilder 的 append 方法进行扩展。 
	- 反例：
	
``` java
 String str = "start";       
 for(int i=0; i<100; i++){           	
 	str = str + "hello";       	
 }
```

说明：反编译出的字节码文件显示每次循环都会 new 出一个 StringBuilder 对象，然后进行 append 操作，最后通过 toString 方法返回 String 对象，造成内存资源浪费。


- 【推荐】final 可提高程序响应效率，声明成 final 的情况：  
	- 不需要重新赋值的变量，包括类属性、局部变量。
	- 对象参数前加 final，表示不允许修改引用的指向。  
	- 类方法确定不允许被重写


- 【推荐】慎用 Object 的 clone 方法来拷贝对象。 
	- 说明：对象的 clone 方法默认是浅拷贝，若想实现深拷贝需要重写 clone 方法实现属性对象 的拷贝。


### 集合处理

- 【强制】关于 hashCode 和 equals 的处理，遵循如下规则： 
	- 只要重写 equals，就必须重写 hashCode。 
	- 因为 Set 存储的是不重复的对象，依据 hashCode 和 equals 进行判断，所以 Set 存储的 对象必须重写这两个方法。 
	- 如果自定义对象做为 Map 的键，那么必须重写 hashCode 和 equals。 
	- 正例：String 重写了 hashCode 和 equals 方法，所以我们可以非常愉快地使用 String 对象 作为 key 来使用



...待写



 ----------

### 谢谢大家阅读，如有帮助，来个喜欢或者关注吧！

 ----------
 本文作者：Anderson/Jerey_Jobs 

 博客地址   ： [夏敏的博客/Anderson大码渣/Jerey_Jobs][1] <br>
 简书地址   :  [Anderson大码渣][2] <br>
 CSDN地址   :  [Jerey_Jobs的专栏][3] <br>
 github地址 :  [Jerey_Jobs][4]
 


  [1]: http://jerey.cn/
  [2]: http://www.jianshu.com/users/016a5ba708a0/latest_articles
  [3]: http://blog.csdn.net/jerey_jobs
  [4]: https://github.com/Jerey-Jobs

