
---
title: Android路由（一）-scheme实现网页链接携带参数跳转到应用
tags:
  - Router
  - Android
grammar_cjkRuby: true
header-img: "img/post-bg-miui6.jpg"
preview-img: "/img/post1/sherloc4.png"
catalog: true
layout:  post
categories: Router
date: 2017-07-18
---

### Scheme
Scheme这个词语我们可以在Uri使用时见到，有`uri.getScheme()`方法。在android中scheme是一种页面内跳转协议，是一种非常好的实现机制，通过定义自己的scheme协议，可以非常方便跳转app中的各个页面；通过scheme协议，服务器可以定制化告诉App跳转那个页面，可以通过通知栏消息定制化跳转页面，可以通过H5页面跳转页面等。

我们来看看谷歌官方对其data描述：见[https://developer.android.com/guide/topics/manifest/data-element.html](https://developer.android.com/guide/topics/manifest/data-element.html)
还有其集成描述：[https://developer.android.com/training/basics/intents/filters.html](https://developer.android.com/training/basics/intents/filters.html)

以上两个网址我在关掉代理的情况下上不了，讲的很清晰，我只能搬过来了。

``` xml
<data>
SYNTAX:
<data android:scheme="string"
      android:host="string"
      android:port="string"
      android:path="string"
      android:pathPattern="string"
      android:pathPrefix="string"
      android:mimeType="string" />
CONTAINED IN:
<intent-filter>
DESCRIPTION:
Adds a data specification to an intent filter. The specification can be just a data type (the mimeType attribute), just a URI, or both a data type and a URI. A URI is specified by separate attributes for each of its parts:

<scheme>://<host>:<port>[<path>|<pathPrefix>|<pathPattern>]

These attributes that specify the URL format are optional, but also mutually dependent:

If a scheme is not specified for the intent filter, all the other URI attributes are ignored.
If a host is not specified for the filter, the port attribute and all the path attributes are ignored.
All the <data> elements contained within the same <intent-filter> element contribute to the same filter. So, for example, the following filter specification,
```

翻译过来就是，`<data>`是写在`<intent-filter>`中的，格式可以是数据的类型，或者是一个URI。其格式最终为`<scheme>://<host>:<port>[<path>|<pathPrefix>|<pathPattern>]`

这些属性是可选的，但是也有一些是有依赖关系的，比如如果没有设置`scheme`，则其他的URI属性将被忽略，又或是如果`host`没有被设置，那么`port`属性不生效。

### Scheme应用场景
通过manifest，应用向系统注册一个URL scheme，该scheme 用于从浏览器或其他应用中启动本应用。通过指定的 URL 字段，可以让应用在被调起后直接打开某些特定页面，比如商品详情页、活动详情页等等。也可以执行某些指定动作，如完成支付等。也可以在应用内通过 html 页来直接调用显示 app 内的某个页面。


```
xl://login:8888/loginActivity?username=xiaaa
```
